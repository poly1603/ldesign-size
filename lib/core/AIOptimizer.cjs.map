{"version":3,"file":"AIOptimizer.cjs","sources":["../../src/core/AIOptimizer.ts"],"sourcesContent":[null],"names":["AIOptimizer","constructor","config","userBehaviorData","optimizationHistory","isLearning","eventListeners","intervalIds","timeoutIds","isDestroyed","apiUrl","model","temperature","maxTokens","apiKey","console","warn","autoAdjustByContent","element","content","analyzeContent","suggestions","getAISuggestions","length","applySuggestions","text","textContent","images","querySelectorAll","tables","code","contentLength","hasImages","hasTables","hasCode","title","document","url","window","location","href","context","prompt","buildPrompt","response","fetch","method","headers","body","JSON","stringify","messages","role","max_tokens","response_format","type","ok","Error","statusText","data","json","parseAIResponse","error","device","getDeviceDetector","getDevice","viewport","getViewport","currentConfig","sizeManager","getConfig","width","height","baseSize","choices","message","parsed","parse","Array","isArray","filter","s","property","suggestedValue","confidence","suggestion","info","reason","value","Number","parseFloat","isNaN","setBaseSize","push","MAX_HISTORY_SIZE","slice","optimizeReadability","options","targetAudience","contentType","lightingConditions","viewingDistance","baseSizeMultiplier","optimizedBaseSize","Math","round","abs","userPreferences","learnFromUserBehavior","startBehaviorTracking","behavior","scrollPatterns","clickPatterns","zoomLevel","sessionDuration","bounceRate","startTime","Date","now","scrollTimer","scrollHandler","setTimeout","position","scrollY","duration","addEventListener","passive","event","handler","clickHandler","e","target","selector","getElementSelector","existing","find","p","count","checkZoom","devicePixelRatio","resizeHandler","intervalId","setInterval","clearInterval","analyzeBehavior","id","className","split","tagName","toLowerCase","behaviorCopy","MAX_BEHAVIOR_DATA","patterns","extractPatterns","needsLargerText","currentSize","min","needsMoreSpacing","getPersonalizedSuggestions","avgZoom","reduce","sum","b","avgSessionDuration","frequentlyClickedElements","getMostClicked","scrollDepth","getAverageScrollDepth","allClicks","forEach","pattern","Object","entries","sort","a","map","depths","flatMap","maxScroll","max","docHeight","documentElement","scrollHeight","innerHeight","_patterns","recommendPreset","isTouch","getHistory","clearHistory","stopLearning","cleanup","removeEventListener","clearTimeout","destroy","exportPreferences","preferences","behaviorData","timestamp","toISOString","importPreferences","optimizer","getAIOptimizer","ai","init","auto","readability","learn","recommend","history"],"mappings":"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"}