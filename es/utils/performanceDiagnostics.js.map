{"version":3,"file":"performanceDiagnostics.js","sources":["../../src/utils/performanceDiagnostics.ts"],"sourcesContent":[null],"names":["PerformanceDiagnostics","constructor","marks","Map","snapshots","maxSnapshots","fpsHistory","lastFrameTime","frameCount","rafId","isMonitoring","getInstance","instance","mark","name","metadata","startTime","performance","now","set","measure","get","console","warn","duration","getMemoryUsage","memory","used","usedJSHeapSize","limit","jsHeapSizeLimit","totalJSHeapSize","percentage","startFPSMonitoring","measureFPS","currentTime","deltaTime","fps","Math","round","push","length","shift","requestAnimationFrame","stopFPSMonitoring","cancelAnimationFrame","getAverageFPS","reduce","sum","createSnapshot","caches","snapshot","timestamp","Date","Array","from","values","undefined","size","fluidSize","conversion","Object","entries","forEach","cache","stats","getSnapshots","clear","clearMarks","clearMeasures","generateReport","report","repeat","toFixed","avgFPS","min","max","sortedMarks","filter","m","sort","a","b","latest","toLocaleString","join","logReport","log","detectBottlenecks","bottlenecks","type","severity","message","slowMarks","perf","perfDiagnostics","startFPS","stopFPS"],"mappings":";;;;;;;;;MAmCaA,sBAAAA,CAAsB;AAAA,EAAnCC,WAAAA,GAAA;AAEU,IAAA,IAAA,CAAAC,KAAAA,uBAAYC,GAAAA,EAAG;AACf,IAAA,IAAA,CAAAC,YAAmC,EAAA;AACnC,IAAA,IAAA,CAAAC,YAAAA,GAAe,GAAA;AACf,IAAA,IAAA,CAAAC,aAAuB,EAAA;AACvB,IAAA,IAAA,CAAAC,aAAAA,GAAgB,CAAA;AAChB,IAAA,IAAA,CAAAC,UAAAA,GAAa,CAAA;AACb,IAAA,IAAA,CAAAC,KAAAA,GAAuB,IAAA;AACvB,IAAA,IAAA,CAAAC,YAAAA,GAAe,KAAA;AAAA,EAqUzB;AAAA,EAnUE,OAAOC,WAAAA,GAAW;AAChB,IAAA,IAAI,CAACX,uBAAuBY,QAAAA,EAAU;AACpCZ,MAAAA,sBAAAA,CAAuBY,QAAAA,GAAW,IAAIZ,sBAAAA;IACxC;AACA,IAAA,OAAOA,sBAAAA,CAAuBY,QAAAA;AAAAA,EAChC;AAAA;AAAA;AAAA;AAAA,EAKAC,IAAAA,CAAKC,MAAcC,QAAAA,EAA8B;AAC/C,IAAA,MAAMF,IAAAA,GAAwB;AAAA,MAC5BC,IAAAA;AAAAA,MACAE,SAAAA,EAAWC,YAAYC,GAAAA,EAAG;AAAA,MAC1BH;AAAAA;AAEF,IAAA,IAAA,CAAKb,KAAAA,CAAMiB,GAAAA,CAAIL,IAAAA,EAAMD,IAAI,CAAA;AAGzB,IAAA,IAAI,OAAOI,WAAAA,CAAYJ,IAAAA,KAAS,UAAA,EAAY;AAC1C,MAAA,IAAI;AACFI,QAAAA,WAAAA,CAAYJ,KAAKC,IAAI,CAAA;AAAA,MACvB,CAAA,CAAA,MAAQ;AAAA,MACN;AAAA,IAEJ;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKAM,QAAQN,IAAAA,EAAY;AAClB,IAAA,MAAMD,IAAAA,GAAO,IAAA,CAAKX,KAAAA,CAAMmB,GAAAA,CAAIP,IAAI,CAAA;AAChC,IAAA,IAAI,CAACD,IAAAA,EAAM;AACTS,MAAAA,OAAAA,CAAQC,IAAAA,CAAK,CAAA,4CAAA,EAA+CT,IAAI,CAAA,CAAE,CAAA;AAClE,MAAA,OAAO,IAAA;AAAA,IACT;AAEA,IAAA,MAAMU,QAAAA,GAAWP,WAAAA,CAAYC,GAAAA,KAAQL,IAAAA,CAAKG,SAAAA;AAC1CH,IAAAA,IAAAA,CAAKW,QAAAA,GAAWA,QAAAA;AAGhB,IAAA,IAAI,OAAOP,WAAAA,CAAYG,OAAAA,KAAY,UAAA,EAAY;AAC7C,MAAA,IAAI;AACFH,QAAAA,WAAAA,CAAYG,OAAAA,CAAQ,CAAA,EAAGN,IAAI,CAAA,QAAA,CAAA,EAAYA,IAAI,CAAA;AAAA,MAC7C,CAAA,CAAA,MAAQ;AAAA,MACN;AAAA,IAEJ;AAEA,IAAA,OAAOU,QAAAA;AAAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKAC,cAAAA,GAAc;AACZ,IAAA,IAAI,OAAOR,WAAAA,KAAgB,WAAA,EAAa,OAAO,IAAA;AAE/C,IAAA,MAAMS,SAAUT,WAAAA,CAAoBS,MAAAA;AACpC,IAAA,IAAI,CAACA,QAAQ,OAAO,IAAA;AAEpB,IAAA,MAAMC,OAAOD,MAAAA,CAAOE,cAAAA;AACpB,IAAA,MAAMC,QAAQH,MAAAA,CAAOI,eAAAA;AAErB,IAAA,OAAO;AAAA,MACLF,cAAAA,EAAgBD,IAAAA;AAAAA,MAChBI,iBAAiBL,MAAAA,CAAOK,eAAAA;AAAAA,MACxBD,eAAAA,EAAiBD,KAAAA;AAAAA,MACjBG,UAAAA,EAAaL,OAAOE,KAAAA,GAAS;AAAA;EAEjC;AAAA;AAAA;AAAA;AAAA,EAKAI,kBAAAA,GAAkB;AAChB,IAAA,IAAI,KAAKvB,YAAAA,EAAc;AAEvB,IAAA,IAAA,CAAKA,YAAAA,GAAe,IAAA;AACpB,IAAA,IAAA,CAAKH,aAAAA,GAAgBU,YAAYC,GAAAA;AACjC,IAAA,IAAA,CAAKV,UAAAA,GAAa,CAAA;AAElB,IAAA,MAAM0B,aAAcC,CAAAA,WAAAA,KAAuB;AACzC,MAAA,IAAI,CAAC,KAAKzB,YAAAA,EAAc;AAExB,MAAA,IAAA,CAAKF,UAAAA,EAAAA;AACL,MAAA,MAAM4B,SAAAA,GAAYD,cAAc,IAAA,CAAK5B,aAAAA;AAGrC,MAAA,IAAI6B,aAAa,GAAA,EAAM;AACrB,QAAA,MAAMC,MAAMC,IAAAA,CAAKC,KAAAA,CAAO,IAAA,CAAK/B,UAAAA,GAAa4B,YAAa,GAAI,CAAA;AAC3D,QAAA,IAAA,CAAK9B,UAAAA,CAAWkC,KAAKH,GAAG,CAAA;AAGxB,QAAA,IAAI,IAAA,CAAK/B,UAAAA,CAAWmC,MAAAA,GAAS,EAAA,EAAI;AAC/B,UAAA,IAAA,CAAKnC,WAAWoC,KAAAA;QAClB;AAEA,QAAA,IAAA,CAAKlC,UAAAA,GAAa,CAAA;AAClB,QAAA,IAAA,CAAKD,aAAAA,GAAgB4B,WAAAA;AAAAA,MACvB;AAEA,MAAA,IAAA,CAAK1B,KAAAA,GAAQkC,sBAAsBT,UAAU,CAAA;AAAA,IAC/C,CAAA;AAEA,IAAA,IAAA,CAAKzB,KAAAA,GAAQkC,sBAAsBT,UAAU,CAAA;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA,EAKAU,iBAAAA,GAAiB;AACf,IAAA,IAAA,CAAKlC,YAAAA,GAAe,KAAA;AACpB,IAAA,IAAI,IAAA,CAAKD,UAAU,IAAA,EAAM;AACvBoC,MAAAA,oBAAAA,CAAqB,KAAKpC,KAAK,CAAA;AAC/B,MAAA,IAAA,CAAKA,KAAAA,GAAQ,IAAA;AAAA,IACf;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKAqC,aAAAA,GAAa;AACX,IAAA,IAAI,IAAA,CAAKxC,UAAAA,CAAWmC,MAAAA,KAAW,CAAA,EAAG,OAAO,CAAA;AACzC,IAAA,OAAOH,IAAAA,CAAKC,KAAAA,CACV,IAAA,CAAKjC,UAAAA,CAAWyC,OAAO,CAACC,GAAAA,EAAKX,GAAAA,KAAQW,GAAAA,GAAMX,GAAAA,EAAK,CAAC,CAAA,GAAI,IAAA,CAAK/B,WAAWmC,MAAM,CAAA;AAAA,EAE/E;AAAA;AAAA;AAAA;AAAA,EAKAQ,eAAeC,MAAAA,EAAyC;AACtD,IAAA,MAAMC,QAAAA,GAAgC;AAAA,MACpCC,SAAAA,EAAWC,KAAKnC,GAAAA,EAAG;AAAA,MACnBhB,OAAOoD,KAAAA,CAAMC,IAAAA,CAAK,IAAA,CAAKrD,KAAAA,CAAMsD,QAAQ,CAAA;AAAA,MACrC9B,MAAAA,EAAQ,IAAA,CAAKD,cAAAA,EAAc,IAAMgC,MAAAA;AAAAA,MACjCP,MAAAA,EAAQ;AAAA,QACNQ,IAAAA,sBAAUvD,GAAAA,EAAG;AAAA,QACbwD,SAAAA,sBAAexD,GAAAA,EAAG;AAAA,QAClByD,UAAAA,sBAAgBzD,GAAAA;AAAG,OACpB;AAAA,MACDkC,GAAAA,EAAK,IAAA,CAAKS,aAAAA,EAAa,IAAMW;AAAAA;AAI/B,IAAA,IAAIP,MAAAA,EAAQ;AACVW,MAAAA,MAAAA,CAAOC,OAAAA,CAAQZ,MAAM,CAAA,CAAEa,OAAAA,CAAQ,CAAC,CAACjD,IAAAA,EAAMkD,KAAK,CAAA,KAAK;AAC/C,QAAA,IAAIA,iBAAiB7D,GAAAA,EAAK;AACxB,UAAA,MAAM8D,KAAAA,uBAAY9D,GAAAA;AAClB8D,UAAAA,KAAAA,CAAM9C,GAAAA,CAAI,MAAA,EAAQ6C,KAAAA,CAAMN,IAAI,CAAA;AAC5BP,UAAAA,QAAAA,CAASD,MAAAA,CAAOpC,IAAI,CAAA,GAAImD,KAAAA;AAAAA,QAC1B;AAAA,MACF,CAAC,CAAA;AAAA,IACH;AAGA,IAAA,IAAA,CAAK7D,SAAAA,CAAUoC,KAAKW,QAAQ,CAAA;AAG5B,IAAA,IAAI,IAAA,CAAK/C,SAAAA,CAAUqC,MAAAA,GAAS,IAAA,CAAKpC,YAAAA,EAAc;AAC7C,MAAA,IAAA,CAAKD,UAAUsC,KAAAA;IACjB;AAEA,IAAA,OAAOS,QAAAA;AAAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKAe,YAAAA,GAAY;AACV,IAAA,OAAO,CAAC,GAAG,IAAA,CAAK9D,SAAS,CAAA;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA,EAKA+D,KAAAA,GAAK;AACH,IAAA,IAAA,CAAKjE,MAAMiE,KAAAA;AACX,IAAA,IAAA,CAAK/D,YAAY,EAAA;AACjB,IAAA,IAAA,CAAKE,aAAa,EAAA;AAClB,IAAA,IAAA,CAAKsC,iBAAAA,EAAiB;AAGtB,IAAA,IAAI,OAAO3B,WAAAA,CAAYmD,UAAAA,KAAe,UAAA,EAAY;AAChD,MAAA,IAAI;AACFnD,QAAAA,WAAAA,CAAYmD,UAAAA,EAAU;AACtBnD,QAAAA,WAAAA,CAAYoD,aAAAA,EAAa;AAAA,MAC3B,CAAA,CAAA,MAAQ;AAAA,MACN;AAAA,IAEJ;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKAC,cAAAA,GAAc;AACZ,IAAA,MAAMC,SAAmB,EAAA;AAEzBA,IAAAA,MAAAA,CAAO/B,IAAAA,CAAK,GAAA,CAAIgC,MAAAA,CAAO,EAAE,CAAC,CAAA;AAC1BD,IAAAA,MAAAA,CAAO/B,KAAK,gDAAkB,CAAA;AAC9B+B,IAAAA,MAAAA,CAAO/B,IAAAA,CAAK,GAAA,CAAIgC,MAAAA,CAAO,EAAE,CAAC,CAAA;AAC1BD,IAAAA,MAAAA,CAAO/B,KAAK,EAAE,CAAA;AAGd,IAAA,MAAMd,MAAAA,GAAS,KAAKD,cAAAA;AACpB,IAAA,IAAIC,MAAAA,EAAQ;AACV6C,MAAAA,MAAAA,CAAO/B,KAAK,iDAAY,CAAA;AACxB+B,MAAAA,MAAAA,CAAO/B,IAAAA,CAAK,gCAAYd,MAAAA,CAAOE,cAAAA,GAAiB,OAAO,IAAA,EAAM6C,OAAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAK,CAAA;AAC5EF,MAAAA,MAAAA,CAAO/B,IAAAA,CAAK,0BAAWd,MAAAA,CAAOK,eAAAA,GAAkB,OAAO,IAAA,EAAM0C,OAAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAK,CAAA;AAC5EF,MAAAA,MAAAA,CAAO/B,IAAAA,CAAK,gCAAYd,MAAAA,CAAOI,eAAAA,GAAkB,OAAO,IAAA,EAAM2C,OAAAA,CAAQ,CAAC,CAAC,CAAA,GAAA,CAAK,CAAA;AAC7EF,MAAAA,MAAAA,CAAO/B,KAAK,CAAA,sBAAA,EAAUd,MAAAA,CAAOM,WAAWyC,OAAAA,CAAQ,CAAC,CAAC,CAAA,CAAA,CAAG,CAAA;AACrDF,MAAAA,MAAAA,CAAO/B,KAAK,EAAE,CAAA;AAAA,IAChB;AAGA,IAAA,MAAMkC,MAAAA,GAAS,KAAK5B,aAAAA;AACpB,IAAA,IAAI4B,SAAS,CAAA,EAAG;AACdH,MAAAA,MAAAA,CAAO/B,KAAK,qCAAU,CAAA;AACtB+B,MAAAA,MAAAA,CAAO/B,IAAAA,CAAK,CAAA,oBAAA,EAAakC,MAAM,CAAA,CAAE,CAAA;AACjCH,MAAAA,MAAAA,CAAO/B,IAAAA,CAAK,uBAAaF,IAAAA,CAAKqC,GAAAA,CAAI,GAAG,IAAA,CAAKrE,UAAU,CAAC,CAAA,CAAE,CAAA;AACvDiE,MAAAA,MAAAA,CAAO/B,IAAAA,CAAK,uBAAaF,IAAAA,CAAKsC,GAAAA,CAAI,GAAG,IAAA,CAAKtE,UAAU,CAAC,CAAA,CAAE,CAAA;AACvDiE,MAAAA,MAAAA,CAAO/B,KAAK,EAAE,CAAA;AAAA,IAChB;AAGA,IAAA,IAAI,IAAA,CAAKtC,KAAAA,CAAMwD,IAAAA,GAAO,CAAA,EAAG;AACvBa,MAAAA,MAAAA,CAAO/B,KAAK,yCAAW,CAAA;AACvB,MAAA,MAAMqC,WAAAA,GAAcvB,MAAMC,IAAAA,CAAK,IAAA,CAAKrD,MAAMsD,MAAAA,EAAQ,CAAA,CAC/CsB,MAAAA,CAAOC,CAAAA,CAAAA,KAAKA,CAAAA,CAAEvD,aAAaiC,MAAS,CAAA,CACpCuB,IAAAA,CAAK,CAACC,CAAAA,EAAGC,CAAAA,KAAAA,CAAOA,EAAE1D,QAAAA,IAAY,CAAA,KAAMyD,CAAAA,CAAEzD,QAAAA,IAAY,CAAA,CAAE,CAAA;AAEvDqD,MAAAA,WAAAA,CAAYd,QAAQlD,CAAAA,IAAAA,KAAO;AACzB0D,QAAAA,MAAAA,CAAO/B,IAAAA,CAAK,CAAA,EAAA,EAAK3B,IAAAA,CAAKC,IAAI,CAAA,EAAA,EAAKD,KAAKW,QAAAA,CAAUiD,OAAAA,CAAQ,CAAC,CAAC,CAAA,EAAA,CAAI,CAAA;AAAA,MAC9D,CAAC,CAAA;AACDF,MAAAA,MAAAA,CAAO/B,KAAK,EAAE,CAAA;AAAA,IAChB;AAGA,IAAA,IAAI,IAAA,CAAKpC,SAAAA,CAAUqC,MAAAA,GAAS,CAAA,EAAG;AAC7B8B,MAAAA,MAAAA,CAAO/B,KAAK,qCAAU,CAAA;AACtB+B,MAAAA,MAAAA,CAAO/B,IAAAA,CAAK,CAAA,4BAAA,EAAW,IAAA,CAAKpC,SAAAA,CAAUqC,MAAM,CAAA,CAAE,CAAA;AAC9C,MAAA,MAAM0C,SAAS,IAAA,CAAK/E,SAAAA,CAAU,IAAA,CAAKA,SAAAA,CAAUqC,SAAS,CAAC,CAAA;AACvD,MAAA,IAAI0C,MAAAA,EAAQ;AACVZ,QAAAA,MAAAA,CAAO/B,IAAAA,CAAK,2CAAa,IAAIa,IAAAA,CAAK8B,OAAO/B,SAAS,CAAA,CAAEgC,cAAAA,EAAgB,CAAA,CAAE,CAAA;AAAA,MACxE;AACAb,MAAAA,MAAAA,CAAO/B,KAAK,EAAE,CAAA;AAAA,IAChB;AAEA+B,IAAAA,MAAAA,CAAO/B,IAAAA,CAAK,GAAA,CAAIgC,MAAAA,CAAO,EAAE,CAAC,CAAA;AAE1B,IAAA,OAAOD,MAAAA,CAAOc,KAAK,IAAI,CAAA;AAAA,EACzB;AAAA;AAAA;AAAA;AAAA,EAKAC,SAAAA,GAAS;AACPhE,IAAAA,OAAAA,CAAQiE,GAAAA,CAAI,IAAA,CAAKjB,cAAAA,EAAgB,CAAA;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA,EAKAkB,iBAAAA,GAAiB;AAKf,IAAA,MAAMC,cAAyD,EAAA;AAG/D,IAAA,MAAM/D,MAAAA,GAAS,KAAKD,cAAAA;AACpB,IAAA,IAAIC,MAAAA,EAAQ;AACV,MAAA,IAAIA,MAAAA,CAAOM,aAAa,EAAA,EAAI;AAC1ByD,QAAAA,WAAAA,CAAYjD,IAAAA,CAAK;AAAA,UACfkD,IAAAA,EAAM,QAAA;AAAA,UACNC,QAAAA,EAAU,MAAA;AAAA,UACVC,SAAS,CAAA,4CAAA,EAAYlE,MAAAA,CAAOM,UAAAA,CAAWyC,OAAAA,CAAQ,CAAC,CAAC,CAAA,CAAA;AAAA,SAClD,CAAA;AAAA,MACH,CAAA,MAAA,IAAW/C,MAAAA,CAAOM,UAAAA,GAAa,EAAA,EAAI;AACjCyD,QAAAA,WAAAA,CAAYjD,IAAAA,CAAK;AAAA,UACfkD,IAAAA,EAAM,QAAA;AAAA,UACNC,QAAAA,EAAU,QAAA;AAAA,UACVC,SAAS,CAAA,4CAAA,EAAYlE,MAAAA,CAAOM,UAAAA,CAAWyC,OAAAA,CAAQ,CAAC,CAAC,CAAA,CAAA;AAAA,SAClD,CAAA;AAAA,MACH;AAAA,IACF;AAGA,IAAA,MAAMC,MAAAA,GAAS,KAAK5B,aAAAA;AACpB,IAAA,IAAI4B,SAAS,CAAA,EAAG;AACd,MAAA,IAAIA,SAAS,EAAA,EAAI;AACfe,QAAAA,WAAAA,CAAYjD,IAAAA,CAAK;AAAA,UACfkD,IAAAA,EAAM,KAAA;AAAA,UACNC,QAAAA,EAAU,MAAA;AAAA,UACVC,OAAAA,EAAS,kCAAclB,MAAM,CAAA;AAAA,SAC9B,CAAA;AAAA,MACH,CAAA,MAAA,IAAWA,SAAS,EAAA,EAAI;AACtBe,QAAAA,WAAAA,CAAYjD,IAAAA,CAAK;AAAA,UACfkD,IAAAA,EAAM,KAAA;AAAA,UACNC,QAAAA,EAAU,QAAA;AAAA,UACVC,OAAAA,EAAS,kCAAclB,MAAM,CAAA;AAAA,SAC9B,CAAA;AAAA,MACH;AAAA,IACF;AAGA,IAAA,MAAMmB,SAAAA,GAAYvC,KAAAA,CAAMC,IAAAA,CAAK,IAAA,CAAKrD,MAAMsD,MAAAA,EAAQ,CAAA,CAC7CsB,MAAAA,CAAOC,OAAKA,CAAAA,CAAEvD,QAAAA,KAAaiC,MAAAA,IAAasB,CAAAA,CAAEvD,WAAW,GAAG,CAAA;AAE3D,IAAA,IAAIqE,SAAAA,CAAUpD,SAAS,CAAA,EAAG;AACxBgD,MAAAA,WAAAA,CAAYjD,IAAAA,CAAK;AAAA,QACfkD,IAAAA,EAAM,gBAAA;AAAA,QACNC,QAAAA,EAAU,QAAA;AAAA,QACVC,OAAAA,EAAS,CAAA,mBAAA,EAAOC,SAAAA,CAAUpD,MAAM,CAAA,kCAAA;AAAA,OACjC,CAAA;AAAA,IACH;AAEA,IAAA,OAAOgD,WAAAA;AAAAA,EACT;AACD;AAGM,MAAMK,IAAAA,GAAO9F,uBAAuBW,WAAAA;AAGpC,MAAMoF,eAAAA,GAAkB;AAAA,EAC7BlF,MAAMA,CAACC,IAAAA,EAAcC,aAAmC+E,IAAAA,CAAKjF,IAAAA,CAAKC,MAAMC,QAAQ,CAAA;AAAA,EAChFK,OAAAA,EAAUN,CAAAA,IAAAA,KAAiBgF,IAAAA,CAAK1E,OAAAA,CAAQN,IAAI,CAAA;AAAA,EAC5CkF,QAAAA,EAAUA,MAAMF,IAAAA,CAAK7D,kBAAAA,EAAkB;AAAA,EACvCgE,OAAAA,EAASA,MAAMH,IAAAA,CAAKlD,iBAAAA,EAAiB;AAAA,EACrCO,QAAAA,EAAWD,CAAAA,MAAAA,KAA8C4C,IAAAA,CAAK7C,cAAAA,CAAeC,MAAM,CAAA;AAAA,EACnFqB,MAAAA,EAAQA,MAAMuB,IAAAA,CAAKR,SAAAA,EAAS;AAAA,EAC5BG,WAAAA,EAAaA,MAAMK,IAAAA,CAAKN,iBAAAA,EAAiB;AAAA,EACzCrB,KAAAA,EAAOA,MAAM2B,IAAAA,CAAK3B,KAAAA;;;;;;;;"}